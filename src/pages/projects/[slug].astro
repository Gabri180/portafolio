---
import Layout from '../../layouts/Layout.astro';

export function getStaticPaths() {
  return [
    // JavaScript
    { params: { slug: 'todo-app' } },
    { params: { slug: 'weather-app' } },
    { params: { slug: 'memory-game' } },
    // HTML/CSS
    { params: { slug: 'landing-page' } },
    { params: { slug: 'css-gallery' } },
    // React
    { params: { slug: 'dashboard' } },
    { params: { slug: 'ecommerce' } },
    // Python
    { params: { slug: 'sentiment-analyzer' } },
    { params: { slug: 'web-scraper' } },
    { params: { slug: 'fastapi-rest' } },
    // Java
    { params: { slug: 'library-system' } },
    { params: { slug: 'calculator' } },
    { params: { slug: 'guessing-game' } },
    // Node.js
    { params: { slug: 'express-api' } },
    { params: { slug: 'chat-server' } },
    // C++
    { params: { slug: 'student-manager' } },
    { params: { slug: 'atm-simulator' } },
    // Swift
    { params: { slug: 'ios-todo' } },
    { params: { slug: 'unit-converter' } },
    // Astro
    { params: { slug: 'markdown-blog' } },
  ];
}

const { slug } = Astro.params;

// Datos de todos los proyectos
const projectsData = {
  // JavaScript
  'todo-app': {
    title: 'Todo App',
    language: 'JavaScript',
    description: 'Aplicaci√≥n completa de gesti√≥n de tareas con almacenamiento local, filtros y estad√≠sticas.',
    tags: ['JavaScript', 'LocalStorage', 'DOM', 'ES6'],
    hasDemo: true,
    features: [
      'Agregar, editar y eliminar tareas',
      'Marcar tareas como completadas',
      'Filtrar por estado (todas, activas, completadas)',
      'Almacenamiento persistente en LocalStorage',
      'Estad√≠sticas en tiempo real',
      'Interfaz responsive y moderna'
    ]
  },
  'weather-app': {
    title: 'Weather App',
    language: 'JavaScript',
    description: 'Aplicaci√≥n del clima que muestra datos meteorol√≥gicos con b√∫squeda por ciudad.',
    tags: ['JavaScript', 'API', 'Fetch', 'Async/Await'],
    hasDemo: true,
    features: [
      'B√∫squeda de clima por ciudad',
      'Datos meteorol√≥gicos simulados',
      'Informaci√≥n detallada (temperatura, humedad, viento)',
      'Iconos din√°micos seg√∫n el clima',
      'Interfaz intuitiva y atractiva',
      'Animaciones suaves'
    ]
  },
  'memory-game': {
    title: 'Juego de Memoria',
    language: 'JavaScript',
    description: 'Juego interactivo de memoria con cartas, temporizador y sistema de puntuaci√≥n.',
    tags: ['JavaScript', 'Game', 'DOM', 'Events'],
    hasDemo: true,
    features: [
      'Tablero de 16 cartas',
      'Temporizador de juego',
      'Contador de movimientos',
      'Sistema de parejas',
      'Animaciones fluidas',
      'Reinicio de juego'
    ]
  },
  
  // HTML/CSS
  'landing-page': {
    title: 'Landing Page Moderna',
    language: 'HTML/CSS',
    description: 'P√°gina de aterrizaje con dise√±o moderno, animaciones CSS y totalmente responsive.',
    tags: ['HTML', 'CSS', 'Responsive', 'Animations'],
    hasDemo: true,
    features: [
      'Dise√±o responsive',
      'Animaciones CSS avanzadas',
      'Secci√≥n hero con gradientes',
      'Cards de caracter√≠sticas',
      'Estad√≠sticas animadas',
      'Optimizada para m√≥viles'
    ]
  },
  'css-gallery': {
    title: 'Galer√≠a CSS Grid',
    language: 'HTML/CSS',
    description: 'Galer√≠a de im√°genes responsive usando CSS Grid con efectos hover creativos.',
    tags: ['HTML', 'CSS', 'Grid', 'Hover Effects'],
    hasDemo: true,
    features: [
      'Layout con CSS Grid',
      'Efectos hover creativos',
      'Overlays con informaci√≥n',
      'Transiciones suaves',
      'Dise√±o masonry',
      'Totalmente responsive'
    ]
  },
  
  // React
  'dashboard': {
    title: 'Dashboard de Estad√≠sticas',
    language: 'React',
    description: 'Dashboard interactivo con gr√°ficos, estad√≠sticas y tema claro/oscuro.',
    tags: ['React', 'Hooks', 'Context API', 'Charts'],
    hasDemo: true,
    features: [
      'Gr√°ficos de barras interactivos',
      'Tarjetas de estad√≠sticas',
      'Actividad en tiempo real',
      'Tema claro/oscuro',
      'Datos din√°micos',
      'Dise√±o responsive'
    ]
  },
  'ecommerce': {
    title: 'Cat√°logo E-commerce',
    language: 'React',
    description: 'Cat√°logo de productos con carrito de compras, filtros y b√∫squeda.',
    tags: ['React', 'State Management', 'Shopping Cart'],
    hasDemo: true,
    features: [
      'Cat√°logo de productos',
      'Carrito de compras funcional',
      'Filtros por categor√≠a',
      'B√∫squeda en tiempo real',
      'Gesti√≥n de cantidades',
      'C√°lculo de totales'
    ]
  },
  
  // Proyectos sin demo (por ahora)
  'sentiment-analyzer': {
    title: 'Analizador de Sentimientos',
    language: 'Python',
    description: 'Sistema de an√°lisis de sentimientos en textos usando procesamiento de lenguaje natural.',
    tags: ['Python', 'NLP', 'Machine Learning'],
    hasDemo: false,
    features: [
      'An√°lisis de sentimientos (positivo, negativo, neutral)',
      'Procesamiento de lenguaje natural',
      'Puntuaci√≥n de sentimientos',
      'An√°lisis por lotes',
      'Integraci√≥n con NLTK',
      'Resultados detallados'
    ]
  },
  'web-scraper': {
    title: 'Web Scraper Avanzado',
    language: 'Python',
    description: 'Scraper multi-hilo para extraer informaci√≥n de sitios web.',
    tags: ['Python', 'Web Scraping', 'Threading'],
    hasDemo: false,
    features: [
      'Scraping multi-hilo',
      'Extracci√≥n de datos estructurados',
      'Manejo de errores robusto',
      'Exportaci√≥n a JSON',
      'Control de concurrencia',
      'BeautifulSoup integration'
    ]
  },
  'fastapi-rest': {
    title: 'API REST con FastAPI',
    language: 'Python',
    description: 'API completa con autenticaci√≥n JWT y base de datos SQLite.',
    tags: ['Python', 'FastAPI', 'JWT', 'SQLite'],
    hasDemo: false,
    features: [
      'Endpoints RESTful completos',
      'Autenticaci√≥n con JWT',
      'Validaci√≥n de datos',
      'Base de datos SQLite',
      'Documentaci√≥n autom√°tica',
      'Manejo de errores'
    ]
  },
  'library-system': {
    title: 'Sistema de Gesti√≥n de Biblioteca',
    language: 'Java',
    description: 'Sistema completo para gestionar libros, usuarios y pr√©stamos.',
    tags: ['Java', 'OOP', 'Collections'],
    hasDemo: false,
    features: [
      'Gesti√≥n de libros y usuarios',
      'Sistema de pr√©stamos',
      'B√∫squeda y filtrado',
      'Persistencia de datos',
      'Interfaz de consola',
      'Estad√≠sticas de biblioteca'
    ]
  },
  'calculator': {
    title: 'Calculadora Cient√≠fica',
    language: 'Java',
    description: 'Calculadora con interfaz gr√°fica usando Swing.',
    tags: ['Java', 'Swing', 'GUI'],
    hasDemo: false,
    features: [
      'Operaciones b√°sicas y cient√≠ficas',
      'Interfaz gr√°fica moderna',
      'Funciones trigonom√©tricas',
      'Operaciones con potencias',
      'Historial de c√°lculos',
      'Manejo de errores'
    ]
  },
  'guessing-game': {
    title: 'Juego de Adivinar N√∫mero',
    language: 'Java',
    description: 'Juego interactivo con niveles de dificultad.',
    tags: ['Java', 'Game', 'Console'],
    hasDemo: false,
    features: [
      'M√∫ltiples niveles de dificultad',
      'Sistema de pistas',
      'Contador de intentos',
      'Estad√≠sticas de juego',
      'Puntuaci√≥n por rendimiento',
      'Interfaz de consola'
    ]
  },
  'express-api': {
    title: 'API RESTful con Express',
    language: 'Node.js',
    description: 'API completa con autenticaci√≥n JWT y MongoDB.',
    tags: ['Node.js', 'Express', 'MongoDB', 'JWT'],
    hasDemo: false,
    features: [
      'Autenticaci√≥n JWT',
      'CRUD completo',
      'Validaci√≥n de datos',
      'Middleware de seguridad',
      'Conexi√≥n con MongoDB',
      'Manejo de errores'
    ]
  },
  'chat-server': {
    title: 'Chat en Tiempo Real',
    language: 'Node.js',
    description: 'Servidor de chat con Socket.IO.',
    tags: ['Node.js', 'Socket.IO', 'WebSocket'],
    hasDemo: false,
    features: [
      'Mensajer√≠a en tiempo real',
      'Salas de chat',
      'Notificaciones de usuarios',
      'Historial de mensajes',
      'Lista de usuarios conectados',
      'WebSocket bidireccional'
    ]
  },
  'student-manager': {
    title: 'Gesti√≥n de Estudiantes',
    language: 'C++',
    description: 'Sistema para gestionar estudiantes con archivos.',
    tags: ['C++', 'OOP', 'File I/O'],
    hasDemo: false,
    features: [
      'Gesti√≥n de estudiantes',
      'Almacenamiento en archivos binarios',
      'B√∫squeda y ordenamiento',
      'C√°lculo de estad√≠sticas',
      'Interfaz de consola',
      'Persistencia de datos'
    ]
  },
  'atm-simulator': {
    title: 'Simulador de Cajero Autom√°tico',
    language: 'C++',
    description: 'Sistema bancario con autenticaci√≥n.',
    tags: ['C++', 'OOP', 'Security'],
    hasDemo: false,
    features: [
      'Autenticaci√≥n segura',
      'Operaciones bancarias',
      'Historial de transacciones',
      'Gesti√≥n de cuentas',
      'Interfaz de consola',
      'Validaciones de seguridad'
    ]
  },
  'ios-todo': {
    title: 'Todo List iOS',
    language: 'Swift',
    description: 'App de tareas con SwiftUI y persistencia.',
    tags: ['Swift', 'SwiftUI', 'iOS'],
    hasDemo: false,
    features: [
      'Interfaz con SwiftUI',
      'Persistencia con UserDefaults',
      'Animaciones nativas',
      'Gesti√≥n de tareas',
      'Filtros y b√∫squeda',
      'Arquitectura MVVM'
    ]
  },
  'unit-converter': {
    title: 'Convertidor de Unidades',
    language: 'Swift',
    description: 'App para convertir diferentes unidades.',
    tags: ['Swift', 'SwiftUI', 'iOS'],
    hasDemo: false,
    features: [
      'M√∫ltiples tipos de unidades',
      'Conversi√≥n en tiempo real',
      'Interfaz intuitiva',
      'SwiftUI moderna',
      'Validaci√≥n de entrada',
      'Soporte para iPad'
    ]
  },
  'markdown-blog': {
    title: 'Blog con Markdown',
    language: 'Astro',
    description: 'Blog est√°tico con soporte para Markdown.',
    tags: ['Astro', 'Markdown', 'Blog'],
    hasDemo: false,
    features: [
      'Renderizado de Markdown',
      'Rutas din√°micas',
      'Frontmatter support',
      'Optimizaci√≥n autom√°tica',
      'SEO optimizado',
      'Generaci√≥n est√°tica'
    ]
  }
};

const project = projectsData[slug as keyof typeof projectsData];

if (!project) {
  return Astro.redirect('/404');
}
---

<Layout title={`${project.title} - Gabriel Mart√≠nez`}>
  <div class="project-page">
    <header class="project-header">
      <div class="container">
        <a href="/#projects" class="back-link">‚Üê Volver a proyectos</a>
        <div class="project-info">
          <span class="language-badge">{project.language}</span>
          <h1>{project.title}</h1>
          <p class="project-description">{project.description}</p>
          <div class="project-tags">
            {project.tags.map((tag: string) => (
              <span class="tag">{tag}</span>
            ))}
          </div>
        </div>
      </div>
    </header>

    <main class="project-main">
      <div class="container">
        <div class="project-content">
          <aside class="project-sidebar">
            <h3>Caracter√≠sticas</h3>
            <ul class="features-list">
              {project.features.map((feature: string) => (
                <li>‚úì {feature}</li>
              ))}
            </ul>
          </aside>

          <div class="project-demo">
            <h3>{project.hasDemo ? 'Demo en Vivo' : 'Proyecto'}</h3>
            <div class="demo-container">
              {project.hasDemo ? (
                <div id={`${slug}-demo`}></div>
              ) : (
                <div class="coming-soon">
                  <h2>üíª Proyecto Backend/Desktop</h2>
                  <p>Este es un proyecto de {project.language} que funciona en entorno backend o desktop.</p>
                  <p>Las caracter√≠sticas completas est√°n listadas en el panel lateral.</p>
                </div>
              )}
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>

  {project.hasDemo && (
    <script is:inline src={`/demos/${slug}.js`}></script>
  )}
</Layout>

<style>
  .project-page {
    min-height: 100vh;
    background: var(--bg-dark);
  }

  .project-header {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    padding: 3rem 0;
    color: white;
  }

  .back-link {
    color: white;
    text-decoration: none;
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    margin-bottom: 2rem;
    opacity: 0.9;
    transition: opacity 0.3s;
  }

  .back-link:hover {
    opacity: 1;
  }

  .project-info {
    max-width: 800px;
  }

  .language-badge {
    display: inline-block;
    padding: 0.5rem 1rem;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 0.5rem;
    font-size: 0.875rem;
    font-weight: 600;
    margin-bottom: 1rem;
    backdrop-filter: blur(10px);
  }

  .project-info h1 {
    font-size: 3rem;
    margin-bottom: 1rem;
  }

  .project-description {
    font-size: 1.25rem;
    margin-bottom: 1.5rem;
    opacity: 0.9;
  }

  .project-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 0.75rem;
  }

  .tag {
    padding: 0.5rem 1rem;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 0.5rem;
    font-size: 0.875rem;
    backdrop-filter: blur(10px);
  }

  .project-main {
    padding: 3rem 0;
  }

  .project-content {
    display: grid;
    grid-template-columns: 300px 1fr;
    gap: 3rem;
  }

  .project-sidebar {
    background: var(--bg-card);
    padding: 2rem;
    border-radius: 1rem;
    height: fit-content;
    position: sticky;
    top: 2rem;
    border: 1px solid rgba(255, 255, 255, 0.1);
  }

  .project-sidebar h3 {
    color: var(--text-light);
    margin-bottom: 1.5rem;
    font-size: 1.25rem;
  }

  .features-list {
    list-style: none;
    padding: 0;
  }

  .features-list li {
    color: var(--text-gray);
    margin-bottom: 1rem;
    padding-left: 0.5rem;
    line-height: 1.6;
  }

  .project-demo h3 {
    color: var(--text-light);
    margin-bottom: 1.5rem;
    font-size: 1.5rem;
  }

  .demo-container {
    background: var(--bg-card);
    border-radius: 1rem;
    padding: 2rem;
    min-height: 600px;
    border: 1px solid rgba(255, 255, 255, 0.1);
  }

  .coming-soon {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: 600px;
    text-align: center;
    gap: 1rem;
  }

  .coming-soon h2 {
    font-size: 2rem;
    color: var(--text-light);
  }

  .coming-soon p {
    color: var(--text-gray);
    font-size: 1.125rem;
    max-width: 500px;
  }

  @media (max-width: 968px) {
    .project-content {
      grid-template-columns: 1fr;
    }

    .project-sidebar {
      position: relative;
      top: 0;
    }

    .project-info h1 {
      font-size: 2rem;
    }
  }
</style>
